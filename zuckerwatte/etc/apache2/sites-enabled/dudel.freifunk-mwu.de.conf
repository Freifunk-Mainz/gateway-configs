<VirtualHost *:80>
        ServerName dudel.freifunk-mwu.de
        ServerAdmin webmaster@freifunk-mwu.de

	Redirect permanent / https://dudel.freifunk-mwu.de/
</VirtualHost>

<VirtualHost *:443>
	ServerName dudel.freifunk-mwu.de
	ServerAdmin webmaster@freifunk-mwu.de

	ProxyPassMatch ^/.well-known !
	ProxyPass / http://127.0.0.1:5000/
    	ProxyPassReverse / http://127.0.0.1:5000/

	ProxyPreserveHost on
	
	SSLEngine on
        SSLCertificateFile      /etc/apache2/ssl/freifunk-mwu.de/cert.pem
        SSLCertificateKeyFile   /etc/apache2/ssl/freifunk-mwu.de/privkey.pem
        SSLCertificateChainFile /etc/apache2/ssl/freifunk-mwu.de/chain.pem

	SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
	SSLProtocol All -SSLv2 -SSLv3
	SSLHonorCipherOrder On	

	Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
	Header always set X-Frame-Options DENY
	Header always set X-Content-Type-Options nosniff
	SSLCompression off 

	BrowserMatch "MSIE [2-6]" \
			nokeepalive ssl-unclean-shutdown \
			downgrade-1.0 force-response-1.0
	# MSIE 7 and newer should be able to use keepalive
	BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown
</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
